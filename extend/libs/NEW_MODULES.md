# üìö –†–æ–∑—à–∏—Ä–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –Ω–æ–≤–∏—Ö –º–æ–¥—É–ª—ñ–≤

## –û–≥–ª—è–¥ –Ω–æ–≤–∏—Ö –º–æ–¥—É–ª—ñ–≤

–£ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –æ–ø–∏—Å–∞–Ω—ñ 5 –ø–æ—Ç—É–∂–Ω–∏—Ö –º–æ–¥—É–ª—ñ–≤, —è–∫—ñ —Ä–æ–∑—à–∏—Ä—é—é—Ç—å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ automation:

### 1. **ocr.py** - –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É (OCR)
–ú–æ–¥—É–ª—å –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –∑ –µ–∫—Ä–∞–Ω—É —Ç–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Tesseract OCR.

### 2. **screen.py** - –†–æ–±–æ—Ç–∞ –∑ –µ–∫—Ä–∞–Ω–æ–º
–ú–æ–¥—É–ª—å –¥–ª—è –∑–º—ñ–Ω–∏ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ–≤, –ø–æ—à—É–∫—É –∑–æ–±—Ä–∞–∂–µ–Ω—å, –∞–Ω–∞–ª—ñ–∑—É –∑–º—ñ–Ω –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.

### 3. **recorder.py** - –ó–∞–ø–∏—Å —Ç–∞ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—ñ–≤
–ú–æ–¥—É–ª—å –¥–ª—è –∑–∞–ø–∏—Å—É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ –¥—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ —ó—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è.

### 4. **sensor.py** - –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥—ñ–π
–ú–æ–¥—É–ª—å –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –µ–∫—Ä–∞–Ω—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ —Ç–∞ –æ–±—Ä–æ–±–∫–∏ –ø–æ–¥—ñ–π.

### 5. **performance.py** - –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑
–ú–æ–¥—É–ª—å –¥–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

---

## 1. OCR –ú–æ–¥—É–ª—å (ocr.py)

### –û–ø–∏—Å
–î–æ–∑–≤–æ–ª—è—î —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç –∑ –µ–∫—Ä–∞–Ω—É —Ç–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å, –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ —Ç–µ–∫—Å—Ç–æ–≤—ñ –±–ª–æ–∫–∏, –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–ª—å–æ—Ä–∏ –ø—ñ–∫—Å–µ–ª—ñ–≤.

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
pip install pytesseract pillow numpy
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —Ç–∞–∫–æ–∂ Tesseract OCR:
# Windows: –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∑ https://github.com/UB-Mannheim/tesseract/wiki
```

### –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

#### `read_text_from_screen(region=None, lang='ukr', config='')`
–ü—Ä–æ—á–∏—Ç–∞—Ç–∏ —Ç–µ–∫—Å—Ç –∑ –µ–∫—Ä–∞–Ω—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é OCR.

```python
from plugins import ocr

# –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç –∑ –µ–∫—Ä–∞–Ω—É
text = ocr.read_text_from_screen()
print(text)

# –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ —Ç–µ–∫—Å—Ç –∑ –ø–µ–≤–Ω–æ—ó –æ–±–ª–∞—Å—Ç—ñ
text = ocr.read_text_from_screen(region=(100, 100, 500, 300))

# –ê–Ω–≥–ª—ñ–π—Å—å–∫–∞ –º–æ–≤–∞
text = ocr.read_text_from_screen(lang='eng')
```

#### `get_text_boxes(region=None, lang='ukr')`
–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–∞ –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –±–ª–æ–∫—ñ–≤.

```python
from plugins import ocr

# –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç–µ–∫—Å—Ç–æ–≤—ñ –±–ª–æ–∫–∏ –∑ —ó—Ö –ø–æ–∑–∏—Ü—ñ—è–º–∏
boxes = ocr.get_text_boxes()

for box in boxes:
    print(f"–¢–µ–∫—Å—Ç: {box['text']}")
    print(f"–ü–æ–∑–∏—Ü—ñ—è: ({box['x']}, {box['y']})")
    print(f"–†–æ–∑–º—ñ—Ä: {box['w']}x{box['h']}")
    print(f"–í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å: {box['conf']}%")
```

#### `find_text_on_screen(text, region=None, lang='ukr')`
–ó–Ω–∞–π—Ç–∏ —Ç–µ–∫—Å—Ç –Ω–∞ –µ–∫—Ä–∞–Ω—ñ —Ç–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –π–æ–≥–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏.

```python
from plugins import ocr

# –ó–Ω–∞–π—Ç–∏ —Ç–µ–∫—Å—Ç –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
coords = ocr.find_text_on_screen("–ó–±–µ—Ä–µ–≥—Ç–∏")
if coords:
    x, y, w, h = coords
    print(f"–¢–µ–∫—Å—Ç –∑–Ω–∞–π–¥–µ–Ω–æ –Ω–∞ –ø–æ–∑–∏—Ü—ñ—ó ({x}, {y})")
```

#### `get_pixel_color(x, y)`
–û—Ç—Ä–∏–º–∞—Ç–∏ RGB –∫–æ–ª—ñ—Ä –ø—ñ–∫—Å–µ–ª—è –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö.

```python
from plugins import ocr

# –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–ª—ñ—Ä –ø—ñ–∫—Å–µ–ª—è
r, g, b = ocr.get_pixel_color(100, 200)
print(f"–ö–æ–ª—ñ—Ä: RGB({r}, {g}, {b})")
```

#### `find_color_on_screen(color, threshold=10, region=None)`
–ó–Ω–∞–π—Ç–∏ –≤—Å—ñ –ø—ñ–∫—Å–µ–ª—ñ –ø–µ–≤–Ω–æ–≥–æ –∫–æ–ª—å–æ—Ä—É –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.

```python
from plugins import ocr

# –ó–Ω–∞–π—Ç–∏ –≤—Å—ñ —á–µ—Ä–≤–æ–Ω—ñ –ø—ñ–∫—Å–µ–ª—ñ
red = (255, 0, 0)
matches = ocr.find_color_on_screen(red, threshold=20)
print(f"–ó–Ω–∞–π–¥–µ–Ω–æ {len(matches)} —á–µ—Ä–≤–æ–Ω–∏—Ö –ø—ñ–∫—Å–µ–ª—ñ–≤")
```

#### `wait_for_text(text, timeout=30, interval=0.5, lang='ukr')`
–ß–µ–∫–∞—Ç–∏ –ø–æ–∫–∏ —Ç–µ–∫—Å—Ç –∑'—è–≤–∏—Ç—å—Å—è –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.

```python
from plugins import ocr

# –ß–µ–∫–∞—Ç–∏ –ø–æ—è–≤–∏ —Ç–µ–∫—Å—Ç—É
if ocr.wait_for_text("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ", timeout=60):
    print("–¢–µ–∫—Å—Ç –∑–Ω–∞–π–¥–µ–Ω–æ!")
else:
    print("–¢–∞–π–º–∞—É—Ç")
```

---

## 2. Screen –ú–æ–¥—É–ª—å (screen.py)

### –û–ø–∏—Å
–ú–æ–¥—É–ª—å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑—ñ —Å–∫—Ä—ñ–Ω—à–æ—Ç–∞–º–∏, –ø–æ—à—É–∫—É –∑–æ–±—Ä–∞–∂–µ–Ω—å, –≤–∏–¥—ñ–ª–µ–Ω–Ω—è –æ–±–ª–∞—Å—Ç–µ–π —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –∑–º—ñ–Ω –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
pip install pillow numpy opencv-python
```

### –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

#### `save_screenshot(filepath, region=None)`
–ó–±–µ—Ä–µ–≥—Ç–∏ —Å–∫—Ä—ñ–Ω—à–æ—Ç —É —Ñ–∞–π–ª.

```python
from plugins import screen

# –ó–±–µ—Ä–µ–≥—Ç–∏ –≤–µ—Å—å –µ–∫—Ä–∞–Ω
screen.save_screenshot("screenshot.png")

# –ó–±–µ—Ä–µ–≥—Ç–∏ —á–∞—Å—Ç–∏–Ω—É –µ–∫—Ä–∞–Ω—É
screen.save_screenshot("region.png", region=(0, 0, 800, 600))
```

#### `find_image_on_screen(template_path, confidence=0.8, region=None)`
–ó–Ω–∞–π—Ç–∏ —à–∞–±–ª–æ–Ω –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.

```python
from plugins import screen

# –ó–Ω–∞–π—Ç–∏ –∫–Ω–æ–ø–∫—É –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
coords = screen.find_image_on_screen("button.png", confidence=0.9)
if coords:
    x, y = coords
    print(f"–ö–Ω–æ–ø–∫–∞ –∑–Ω–∞–π–¥–µ–Ω–∞ –≤ —Ü–µ–Ω—Ç—Ä—ñ ({x}, {y})")
```

#### `find_image_all(template_path, confidence=0.8, region=None)`
–ó–Ω–∞–π—Ç–∏ –≤—Å—ñ –≤—Ö–æ–¥–∂–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—É –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.

```python
from plugins import screen

# –ó–Ω–∞–π—Ç–∏ –≤—Å—ñ —ñ–∫–æ–Ω–∫–∏
matches = screen.find_image_all("icon.png", confidence=0.85)
for i, (x, y) in enumerate(matches):
    print(f"–Ü–∫–æ–Ω–∫–∞ {i+1}: ({x}, {y})")
```

#### `detect_changes(screenshot1, screenshot2, threshold=30)`
–í–∏—è–≤–∏—Ç–∏ –∑–º—ñ–Ω–∏ –º—ñ–∂ –¥–≤–æ–º–∞ —Å–∫—Ä—ñ–Ω—à–æ—Ç–∞–º–∏.

```python
from plugins import screen
from PIL import ImageGrab

# –í–∑—è—Ç–∏ –ø–µ—Ä—à–∏–π —Å–∫—Ä—ñ–Ω—à–æ—Ç
img1 = ImageGrab.grab()

# –ó—Ä–æ–±–∏—Ç–∏ —è–∫—ñ—Å—å –¥—ñ—ó...

# –í–∑—è—Ç–∏ –¥—Ä—É–≥–∏–π —Å–∫—Ä—ñ–Ω—à–æ—Ç
img2 = ImageGrab.grab()

# –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏
has_changes, change_pct, diff_img = screen.detect_changes(img1, img2)
print(f"–ó–º—ñ–Ω–∏–ª–æ—Å—å: {change_pct:.2f}%")
```

#### `split_screen_grid(cols=2, rows=2)`
–†–æ–∑–¥—ñ–ª–∏—Ç–∏ –µ–∫—Ä–∞–Ω –Ω–∞ —Å—ñ—Ç–∫—É –æ–±–ª–∞—Å—Ç–µ–π.

```python
from plugins import screen

# –†–æ–∑–¥—ñ–ª–∏—Ç–∏ –µ–∫—Ä–∞–Ω –Ω–∞ 3x3 —Å—ñ—Ç–∫—É
regions = screen.split_screen_grid(cols=3, rows=3)

for name, (x1, y1, x2, y2) in regions.items():
    print(f"{name}: ({x1}, {y1}) -> ({x2}, {y2})")
```

#### `get_dominant_color(region=None)`
–û—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ–º—ñ–Ω—É—é—á–∏–π –∫–æ–ª—ñ—Ä –æ–±–ª–∞—Å—Ç—ñ.

```python
from plugins import screen

# –û—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ–º—ñ–Ω—É—é—á–∏–π –∫–æ–ª—ñ—Ä –µ–∫—Ä–∞–Ω—É
r, g, b = screen.get_dominant_color()
print(f"–î–æ–º—ñ–Ω—É—é—á–∏–π –∫–æ–ª—ñ—Ä: RGB({r}, {g}, {b})")
```

#### `wait_for_screen_change(timeout=30, interval=0.5, threshold=30)`
–ß–µ–∫–∞—Ç–∏ –ø–æ–∫–∏ –µ–∫—Ä–∞–Ω –∑–º—ñ–Ω—é—î—Ç—å—Å—è.

```python
from plugins import screen

if screen.wait_for_screen_change(timeout=60):
    print("–ï–∫—Ä–∞–Ω –∑–º—ñ–Ω–∏–≤—Å—è!")
```

#### `wait_for_image(template_path, timeout=30, interval=0.5, confidence=0.8)`
–ß–µ–∫–∞—Ç–∏ –ø–æ–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑'—è–≤–∏—Ç—å—Å—è –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.

```python
from plugins import screen

if screen.wait_for_image("dialog.png", timeout=30):
    print("–î—ñ–∞–ª–æ–≥ –∑'—è–≤–∏–≤—Å—è!")
```

---

## 3. Recorder –ú–æ–¥—É–ª—å (recorder.py)

### –û–ø–∏—Å
–î–æ–∑–≤–æ–ª—è—î –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –¥—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —ó—Ö —è–∫ –º–∞–∫—Ä–æ—Å–∏.

### –û—Å–Ω–æ–≤–Ω—ñ –∫–ª–∞—Å–∏

#### –ö–ª–∞—Å `Recorder`
–û—Å–Ω–æ–≤–Ω–∏–π –∫–ª–∞—Å –¥–ª—è –∑–∞–ø–∏—Å—É —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–∞–∫—Ä–æ—Å–∞–º–∏.

```python
from plugins.recorder import Recorder

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –º–∞–∫—Ä–æ—Å
recorder = Recorder("my_macro")

# –ü–æ—á–∞—Ç–∏ –∑–∞–ø–∏—Å
recorder.start_recording()

# –ó–∞–ø–∏—Å–∞—Ç–∏ –¥—ñ—ó
recorder.record_mouse_move(100, 100)
recorder.record_mouse_click(100, 100, button="left")
recorder.record_text("–ü—Ä–∏–≤—ñ—Ç")
recorder.record_wait(1.0)

# –ó—É–ø–∏–Ω–∏—Ç–∏ –∑–∞–ø–∏—Å
recorder.stop_recording()

# –ó–±–µ—Ä–µ–≥—Ç–∏ –º–∞–∫—Ä–æ—Å
recorder.save("macros/my_macro.json")
```

#### –ú–µ—Ç–æ–¥–∏ –∑–∞–ø–∏—Å—É –¥—ñ–π

```python
# –†—É—Ö –º–∏—à—ñ
recorder.record_mouse_move(x=500, y=300)

# –ö–ª–∞—Ü–∞–Ω–Ω—è –º–∏—à—ñ
recorder.record_mouse_click(x=500, y=300, button="left", count=1)

# –ì–æ—Ä—Ç–∞–Ω–Ω—è
recorder.record_mouse_scroll(x=500, y=300, dx=0, dy=3)

# –ù–∞—Ç–∏—Å–∫ –∫–ª–∞–≤—ñ—à—ñ
recorder.record_key_press(key="Enter")

# –í–≤–µ–¥–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
recorder.record_text("–¢–µ–∫—Å—Ç –¥–ª—è –≤–≤–æ–¥—É")

# –ü–∞—É–∑–∞
recorder.record_wait(duration=2.0)
```

#### –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—ñ–≤

```python
# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–∞–∫—Ä–æ—Å
recorder = Recorder()
recorder.load("macros/my_macro.json")

# –í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ 1 —Ä–∞–∑
recorder.playback(loop_count=1, speed=1.0)

# –í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ 3 —Ä–∞–∑–∏ –∑ –ø–æ–ª–æ–≤–∏–Ω–Ω–æ—é —à–≤–∏–¥–∫—ñ—Å—Ç—é
recorder.playback(loop_count=3, speed=2.0)

# –í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ —É —Ñ–æ–Ω–æ–≤–æ–º—É –ø–æ—Ç–æ—Ü—ñ
thread = recorder.playback_async(loop_count=1)
```

#### –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—ñ–≤

```python
recorder = Recorder()
recorder.load("macros/my_macro.json")

# –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –¥—ñ—é –∑–∞ —ñ–Ω–¥–µ–∫—Å–æ–º
recorder.edit_action(0, x=600, y=400)

# –í–∏–¥–∞–ª–∏—Ç–∏ –¥—ñ—é
recorder.delete_action(2)

# –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
stats = recorder.get_statistics()
print(stats)

# –ó–±–µ—Ä–µ–≥–∏ –∑–º—ñ–Ω–∏
recorder.save("macros/my_macro.json")
```

---

## 4. Sensor –ú–æ–¥—É–ª—å (sensor.py)

### –û–ø–∏—Å
–ú–æ–¥—É–ª—å –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –µ–∫—Ä–∞–Ω—É —Ç–∞ –æ–±—Ä–æ–±–∫–∏ –ø–æ–¥—ñ–π —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

### –û—Å–Ω–æ–≤–Ω—ñ –∫–ª–∞—Å–∏

#### –ö–ª–∞—Å `Sensor`
–û—Å–Ω–æ–≤–Ω–∏–π –∫–ª–∞—Å –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É.

```python
from plugins.sensor import Sensor, EventType

# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–µ–Ω—Å–æ—Ä
sensor = Sensor("my_sensor")

# –î–æ–¥–∞—Ç–∏ —Å–ª—É—Ö–∞—á–∞ –ø–æ–¥—ñ–π
def on_screen_change(event):
    print(f"–ï–∫—Ä–∞–Ω –∑–º—ñ–Ω–∏–≤—Å—è: {event.data}")

sensor.add_listener(EventType.SCREEN_CHANGE, on_screen_change)

# –ü–æ—á–∞—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
sensor.start_monitoring(check_interval=1.0, log_file="events.log")

# ... —Ä–æ–±–∏—Ç–∏ –¥—ñ—ó ...

# –ó—É–ø–∏–Ω–∏—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
sensor.stop_monitoring()

# –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
stats = sensor.get_event_statistics()
print(stats)
```

#### –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π

```python
from plugins.sensor import Sensor, EventType

sensor = Sensor("my_sensor")

# –ö–ª–∞—Ü–∞–Ω–Ω—è –º–∏—à—ñ
def on_click(event):
    print(f"–ö–ª–∞—Ü–∞–Ω–Ω—è –º–∏—à—ñ –≤ ({event.data['x']}, {event.data['y']})")

# –ü–æ–¥—ñ—è –∑ —Ñ—ñ–ª—å—Ç—Ä–æ–º
def filter_important(event):
    return event.data.get('important', False)

sensor.add_listener(
    EventType.MOUSE_CLICK,
    on_click,
    filter_func=filter_important
)

# –ß–µ–∫–∞—Ç–∏ –ø–µ–≤–Ω—É –ø–æ–¥—ñ—é
event = sensor.wait_for_event(EventType.SCREEN_CHANGE, timeout=30)
if event:
    print(f"–ü–æ–¥—ñ—è –≤–∏—è–≤–ª–µ–Ω–∞: {event.to_dict()}")
```

#### –ï–∫—Å–ø–æ—Ä—Ç –ø–æ–¥—ñ–π

```python
# –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø–æ–¥—ñ–π —É JSON
sensor.export_events("events.json")

# –û—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –ø–æ–¥—ñ–π
sensor.clear_history()

# –û—Ç—Ä–∏–º–∞—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ –ø–æ–¥—ñ–π
recent = sensor.get_recent_events(count=50)
```

#### ScreenSensor

```python
from plugins.sensor import ScreenSensor

# –°–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Å–µ–Ω—Å–æ—Ä –¥–ª—è –µ–∫—Ä–∞–Ω—É
screen_sensor = ScreenSensor()

def on_change(event):
    print("–ï–∫—Ä–∞–Ω –∑–º—ñ–Ω–∏–≤—Å—è!")

screen_sensor.add_listener(EventType.SCREEN_CHANGE, on_change)
screen_sensor.start_monitoring()
```

---

## 5. Performance –ú–æ–¥—É–ª—å (performance.py)

### –û–ø–∏—Å
–ú–æ–¥—É–ª—å –¥–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

#### –¢–∞–π–º–µ—Ä

```python
from plugins.performance import SimpleTimer

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —è–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä
with SimpleTimer("my_operation") as timer:
    # —Ä–æ–±–∏—Ç–∏ —â–æ—Å—å
    time.sleep(1)

print(timer)  # –í–∏–≤–µ–¥–µ: my_operation: 1.0023 —Å–µ–∫
```

#### –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —á–∞—Å—É

```python
from plugins.performance import measure_time

@measure_time
def slow_operation():
    time.sleep(2)
    return "–≥–æ—Ç–æ–≤–æ"

result = slow_operation()
# –í–∏–≤–µ–¥–µ: ‚úì slow_operation: 2.0045 —Å–µ–∫
```

#### –ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ

```python
from plugins.performance import retry
import random

@retry(max_attempts=3, delay=1.0, backoff=2.0)
def unstable_operation():
    if random.random() < 0.7:
        raise Exception("–ü–æ–º–∏–ª–∫–∞!")
    return "—É—Å–ø—ñ—Ö"

try:
    result = unstable_operation()
except Exception as e:
    print(f"–ù–µ –≤–¥–∞–ª–æ—Å—å: {e}")
```

#### –ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

```python
from plugins.performance import cache

@cache(ttl=60.0)  # –ö–µ—à –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
def expensive_calculation(x, y):
    return x + y

# –ü–µ—Ä—à–∏–π –≤–∏–∫–ª–∏–∫ - —Ä–µ–∞–ª—å–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫
result1 = expensive_calculation(10, 20)  # –û–±—á–∏—Å–ª—é—î—Ç—å—Å—è

# –î—Ä—É–≥–∏–π –≤–∏–∫–ª–∏–∫ - –∑ –∫–µ—à—É
result2 = expensive_calculation(10, 20)  # –ó –∫–µ—à—É

# –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à
expensive_calculation.clear_cache()
```

#### –õ–æ–≥–≥–µ—Ä

```python
from plugins.performance import Logger, LogLevel

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –ª–æ–≥–≥–µ—Ä
logger = Logger(
    "my_app",
    log_file="app.log",
    min_level=LogLevel.INFO
)

# –õ–æ–≥—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
logger.debug("–î–µ—Ç–∞–ª—å –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è")
logger.info("–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è")
logger.warning("–ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è")
logger.error("–ü–æ–º–∏–ª–∫–∞")

# –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
messages = logger.get_messages(level=LogLevel.ERROR)
```

#### –ë–∞—Ç—á–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ü—ñ–π

```python
from plugins.performance import Batch

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –±–∞—Ç—á
batch = Batch(batch_size=100, timeout=5.0)

# –î–æ–¥–∞–≤–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏
for i in range(250):
    should_flush = batch.add(f"item_{i}")
    
    if should_flush or batch.should_flush():
        items = batch.flush()
        # –û–±—Ä–æ–±–∏—Ç–∏ –±–∞—Ç—á
        print(f"–û–±—Ä–æ–±–ª—è—é {len(items)} –µ–ª–µ–º–µ–Ω—Ç—ñ–≤")
```

#### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –ø—É–ª –∑–∞–¥–∞—á

```python
from plugins.performance import AsyncTaskPool
import time

def process_item(item):
    time.sleep(1)
    return item * 2

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—É–ª –∑ 4 —Ä–æ–±—ñ—Ç–Ω–∏–∫–∞–º–∏
pool = AsyncTaskPool(max_workers=4)

# –î–æ–¥–∞–≤–∞—Ç–∏ –∑–∞–¥–∞—á—ñ
for i in range(10):
    pool.submit(process_item, i)

# –ß–µ–∫–∞—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
results = pool.wait_all(timeout=30)
print(results)  # [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]

pool.shutdown()
```

#### –ú–æ–Ω—ñ—Ç–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

```python
from plugins.performance import PerformanceMonitor

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä
monitor = PerformanceMonitor()

# –ó–∞–ø–∏—Å–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏
monitor.record_metric("operation_1", 0.25, success=True)
monitor.record_metric("operation_2", 1.50, success=True)
monitor.record_metric("operation_3", 0.10, success=False, error_message="–ü–æ–º–∏–ª–∫–∞")

# –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
stats = monitor.get_statistics()
for op, data in stats.items():
    print(f"{op}: {data['count']} —Ä–∞–∑—ñ–≤, {data['avg_time']:.3f} —Å–µ–∫")

# –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏
monitor.export_metrics("metrics.json")
```

---

## –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏

### –ü—Ä–∏–∫–ª–∞–¥ 1: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –∑ OCR —Ç–∞ Recorder

```python
from plugins import automation, ocr
from plugins.recorder import Recorder

# –ó–∞–ø–∏—Å–∞—Ç–∏ –¥—ñ—ó –¥–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Ñ–æ—Ä–º–∏
recorder = Recorder("fill_form")
recorder.start_recording()

# –ó–Ω–∞–π—Ç–∏ –ø–æ–ª–µ –¥–ª—è —ñ–º–µ–Ω—ñ
coords = ocr.find_text_on_screen("–Ü–º'—è:")
if coords:
    x, y = coords[0] + 100, coords[1]
    automation.click(x, y)
    automation.type_text("–Ü–≤–∞–Ω")

recorder.stop_recording()
recorder.save("form_filler.json")

# –í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –º–∞–∫—Ä–æ—Å –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤
recorder.playback(loop_count=5)
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑ —Å–µ–Ω—Å–æ—Ä–æ–º

```python
from plugins.sensor import Sensor, EventType
from plugins import screen

sensor = Sensor()

def on_change(event):
    # –ó–±–µ—Ä–µ–≥—Ç–∏ —Å–∫—Ä—ñ–Ω—à–æ—Ç –ø—Ä–∏ –∑–º—ñ–Ω—ñ
    screen.save_screenshot(f"changes/screen_{event.timestamp:.0f}.png")

sensor.add_listener(EventType.SCREEN_CHANGE, on_change)
sensor.start_monitoring(log_file="monitor.log")

# –ß–µ–∫–∞—Ç–∏ 5 —Ö–≤–∏–ª–∏–Ω
import time
time.sleep(300)

sensor.stop_monitoring()
sensor.export_events("events.json")
```

### –ü—Ä–∏–∫–ª–∞–¥ 3: –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –ø–∞–∫–µ—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞

```python
from plugins.performance import AsyncTaskPool, measure_time

@measure_time
def process_file(filename):
    # –û–±—Ä–æ–±–∏—Ç–∏ —Ñ–∞–π–ª
    return f"processed_{filename}"

files = [f"file_{i}.txt" for i in range(100)]
pool = AsyncTaskPool(max_workers=8)

for file in files:
    pool.submit(process_file, file)

results = pool.wait_all()
print(f"–û–±—Ä–æ–±–ª–µ–Ω–æ {len(results)} —Ñ–∞–π–ª—ñ–≤")
pool.shutdown()
```

---

## –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –î–ª—è OCR –º–æ–¥—É–ª—è
```bash
pip install pytesseract pillow numpy
```
–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Tesseract OCR: https://github.com/UB-Mannheim/tesseract/wiki

### –î–ª—è Screen –º–æ–¥—É–ª—è
```bash
pip install pillow numpy opencv-python
```

### –î–ª—è —ñ–Ω—à–∏—Ö –º–æ–¥—É–ª—ñ–≤ (–≤–∂–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ)
```bash
pip install pynput
```

### –ü–æ–≤–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
```bash
pip install pytesseract pillow numpy opencv-python pynput
```
